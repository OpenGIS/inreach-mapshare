const inmap_maps=[],inmap_create_map=function(e=null,t=null,i=null){if(!e||!t||!jQuery||"object"!=typeof inmap_L)return!1;var a="inmap-"+e,n=jQuery("#"+a);if(!n.length)return!1;var r=inmap_L.map(a,{attributionControl:!1}),o=inmap_L.control.attribution({prefix:!1});o.addAttribution('<a href="https://github.com/OpenGIS/inreach-mapshare">Inreach Mapshare</a>'),o.addTo(r),n.data("map_l",r),inmap_maps[e]=r;var s=jQuery("body").first(),p=n.parents(".inmap-wrap",s),l=jQuery(".inmap-info",p),d={},c={},m={},u={},h={},f={},_=function(){var e=l.height(),t=u.height();e-t>0?l.css("padding-top",t+"px"):l.removeAttr("style")},v=function(){p.hasClass("inmap-fullscreen")?p.css({width:s.width()+"px",height:s.height()+"px"}):p.removeAttr("style"),_(),"function"==typeof h.get&&h.get(0).scrollIntoView({behaviour:"smooth",block:"center"}),r.invalidateSize()},g=function(){f=jQuery(".leaflet-control-container .leaflet-top",n).first();var e=jQuery("<div />").attr({class:"inmap-control leaflet-bar leaflet-control"}).append(jQuery("<a />").attr({class:"inmap-button inmap-icon inmap-icon-fullscreen",href:"#",title:"Fullscreen",role:"button","aria-label":"Fullscreen"}).on("click",(function(e){e.preventDefault(),s.toggleClass("inmap-has-single"),p.toggleClass("inmap-fullscreen"),v()})));f.addClass("inmap-map-ui").append(e)},y=function(){for(id in m){var e=jQuery(".inmap-info-title",m[id]),t=e.text().replace("[","<span>").replace("]","</span>");e.html(t),m[id].hasClass("inmap-only")||m[id].addClass("inmap-hide-extended");var i=jQuery(".inmap-icon",c[id]);m[id].append(i.clone()),jQuery("table tr",m[id]).each((function(){var e=jQuery(this),t=jQuery("td",e);jQuery("th",e).addClass("inmap-info-extended");var i=e.attr("class").replace("joe-assoc_array-",""),a=t.text();switch(i){case"elevation":var n=parseFloat(a);isNaN(n)||t.text(n.toFixed(1)+" (m) "+(3.28084*n).toFixed(1)+" (ft) ");break;case"velocity":var r=parseFloat(a);isNaN(r)||t.text(r.toFixed(1)+" (km/h) "+(1.609344*r).toFixed(1)+" (mph) ");break;case"time_utc":case"valid_gps_fix":e.addClass("inmap-info-extended")}})),m[id].hasClass("inmap-last")&&(u=m[id])}},b=function(e=null,t="active",i=!1){for(this_id in d)this_id===e?("active"==t&&m[this_id].hasClass("inmap-active")?(m[this_id].removeClass("inmap-hide-extended"),r.getZoom()<14?r.setView(d[this_id].getLatLng(),14):r.setView(d[this_id].getLatLng())):(c[this_id].addClass("inmap-"+t),m[this_id].addClass("inmap-"+t)),"active"==t&&(i&&m[this_id].get(0).scrollIntoView({behaviour:"smooth",block:"center"}),r.setView(d[this_id].getLatLng()))):"active"==t?(m[this_id].removeClass("inmap-active"),m[this_id].hasClass("inmap-last")||c[this_id].removeClass("inmap-active")):(m[this_id].removeClass("inmap-"+t),c[this_id].removeClass("inmap-"+t));"active"==t&&_()},j="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png";if("string"==typeof inmap_shortcode_js.basemap_url&&inmap_shortcode_js.basemap_url.length)j=inmap_shortcode_js.basemap_url;var C='&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>';if("string"==typeof inmap_shortcode_js.basemap_attribution&&inmap_shortcode_js.basemap_attribution.length)C=inmap_shortcode_js.basemap_attribution;inmap_L.tileLayer(j,{maxZoom:19,attribution:C}).addTo(r);var x,L=inmap_L.geoJSON(t,{style:function(e){if("object"==typeof e.properties.style)return e.properties.style},pointToLayer:function(e,t){if(void 0===e.properties.id)return!1;var i=e.properties.id.toString();return"object"==typeof e.properties.icon?d[i]=inmap_L.marker(t,{icon:inmap_L.divIcon(e.properties.icon)}):d[i]=inmap_L.marker(t),m[i]=jQuery("<div />").addClass(e.properties.className).attr("title",e.properties.title).html(e.properties.description).hover((function(){b(i,"hover")}),(function(){b(null,"hover")})).on("click",(function(){h=jQuery(this),b(i,"active")})),l.append(m[i]),d[i]},onEachFeature:function(e,t){if(void 0===e.properties.id)return!1;var i=e.properties.id.toString();t.on("add",(function(t){c[i]=jQuery(t.target.getElement()).attr("title",e.properties.title).addClass(e.properties.className).data("marker_l",t.target).on("mouseenter",(function(){b(i,"hover",!0)})).on("click",(function(){b(i,"active",!0)}))}))}});L.addTo(r),L.on("add",(function(){y(),g(),jQuery(window).on("resize",(function(){v()})),v()})),r.fitBounds(L.getBounds()),i&&JSON.stringify(i)&&(x=i,inmap_L.geoJSON(x,{style:{color:"#ff7800",weight:3,opacity:.5},onEachFeature:function(e,t){t.bindTooltip("Planned Route")}}).addTo(r))};
window.inmap_maps=[];window.inmap_create_map=function(e=null,t=null,a=null){if(!e||!t||!jQuery||typeof inmap_L!="object")return!1;var h={attributionControl:!1},d="inmap-"+e,r=jQuery("#"+d);if(!r.length)return!1;var f=inmap_L.map(d,h),u=inmap_L.control.attribution({prefix:!1});u.addAttribution('<a href="https://github.com/OpenGIS/inreach-mapshare">Inreach Mapshare</a>'),u.addTo(f),r.data("map_l",f),inmap_maps[e]=f;var c=jQuery("body").first(),n=r.parents(".inmap-wrap",c),y=jQuery(".inmap-info",n),v={},_={},s={},g={},b={},S={},N=function(){var o=y.height(),l=g.height(),p=o-l;p>0?y.css("padding-top",l+"px"):y.removeAttr("style")},F=function(){E(),z(),jQuery(window).on("resize",function(){w()}),w()},w=function(){n.hasClass("inmap-fullscreen")?n.css({width:c.width()+"px",height:c.height()+"px"}):n.removeAttr("style"),N(),typeof b.get=="function"&&b.get(0).scrollIntoView({behaviour:"smooth",block:"center"}),f.invalidateSize()},z=function(){S=jQuery(".leaflet-control-container .leaflet-top",r).first();var o=jQuery("<div />").attr({class:"inmap-control leaflet-bar leaflet-control"}).append(jQuery("<a />").attr({class:"inmap-button inmap-icon inmap-icon-fullscreen",href:"#",title:"Fullscreen",role:"button","aria-label":"Fullscreen"}).on("click",function(l){l.preventDefault(),c.toggleClass("inmap-has-single"),n.toggleClass("inmap-fullscreen"),w()}));S.addClass("inmap-map-ui").append(o)},E=function(){for(id in s){var o=jQuery(".inmap-info-title",s[id]),l=o.text().replace("[","<span>").replace("]","</span>");o.html(l),s[id].hasClass("inmap-only")||s[id].addClass("inmap-hide-extended");var p=jQuery(".inmap-icon",_[id]);s[id].append(p.clone()),jQuery("table tr",s[id]).each(function(){var m=jQuery(this),x=jQuery("td",m);jQuery("th",m).addClass("inmap-info-extended");var D=m.attr("class").replace("joe-assoc_array-",""),q=x.text();switch(D){case"elevation":var k=parseFloat(q);isNaN(k)||x.text(k.toFixed(1)+" (m) "+(k*3.28084).toFixed(1)+" (ft) ");break;case"velocity":var L=parseFloat(q);isNaN(L)||x.text(L.toFixed(1)+" (km/h) "+(L*1.609344).toFixed(1)+" (mph) ");break;case"time_utc":case"valid_gps_fix":m.addClass("inmap-info-extended");break}}),s[id].hasClass("inmap-last")&&(g=s[id])}},Q=function(o=null,l="active",p=!1){var m=14;for(this_id in v)this_id===o?(l=="active"&&s[this_id].hasClass("inmap-active")?(s[this_id].removeClass("inmap-hide-extended"),f.getZoom()<m?f.setView(v[this_id].getLatLng(),m):f.setView(v[this_id].getLatLng())):(_[this_id].addClass("inmap-"+l),s[this_id].addClass("inmap-"+l)),l=="active"&&(p&&s[this_id].get(0).scrollIntoView({behaviour:"smooth",block:"center"}),f.setView(v[this_id].getLatLng()))):l=="active"?(s[this_id].removeClass("inmap-active"),s[this_id].hasClass("inmap-last")||_[this_id].removeClass("inmap-active")):(s[this_id].removeClass("inmap-"+l),_[this_id].removeClass("inmap-"+l));l=="active"&&N()},I=function(o){inmap_L.geoJSON(o,{style:{color:"#ff7800",weight:3,opacity:.5},onEachFeature:function(l,p){p.bindTooltip("Planned Route")}}).addTo(f)},T="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png";if(typeof inmap_shortcode_js.basemap_url=="string"&&inmap_shortcode_js.basemap_url.length)var T=inmap_shortcode_js.basemap_url;var O='&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>';if(typeof inmap_shortcode_js.basemap_attribution=="string"&&inmap_shortcode_js.basemap_attribution.length)var O=inmap_shortcode_js.basemap_attribution;inmap_L.tileLayer(T,{maxZoom:19,attribution:O}).addTo(f);var C=inmap_L.geoJSON(t,{style:function(o){if(typeof o.properties.style=="object")return o.properties.style},pointToLayer:function(o,l){if(typeof o.properties.id>"u")return!1;var p=o.properties.id.toString();return typeof o.properties.icon=="object"?v[p]=inmap_L.marker(l,{icon:inmap_L.divIcon(o.properties.icon)}):v[p]=inmap_L.marker(l),s[p]=jQuery("<div />").addClass(o.properties.className).attr("title",o.properties.title).html(o.properties.description).hover(function(){Q(p,"hover")},function(){Q(null,"hover")}).on("click",function(){b=jQuery(this),Q(p,"active")}),y.append(s[p]),v[p]},onEachFeature:function(o,l){if(typeof o.properties.id>"u")return!1;var p=o.properties.id.toString();l.on("add",function(m){_[p]=jQuery(m.target.getElement()).attr("title",o.properties.title).addClass(o.properties.className).data("marker_l",m.target).on("mouseenter",function(){Q(p,"hover",!0)}).on("click",function(){Q(p,"active",!0)})})}});C.addTo(f),C.on("add",function(){F()}),f.fitBounds(C.getBounds()),a&&JSON.stringify(a)&&I(a)};window.joe_setup_parameter_tooltips=function(){jQuery("a.joe-tooltip").on({mouseenter:function(e){var t=jQuery(this).data("title");jQuery('<p id="joe-tooltip-active"></p>').text(t).appendTo("body").fadeIn("slow")},mouseleave:function(e){jQuery("#joe-tooltip-active").remove()},mousemove:function(e){if(joe_is_touch_device())var t=e.pageX-250;else var t=e.pageX-220;var a=e.pageY+5;jQuery("#joe-tooltip-active").css({top:a,left:t})}})};window.joe_is_touch_device=function(){var e=" -webkit- -moz- -o- -ms- ".split(" "),t=function(h){return window.matchMedia(h).matches};if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0;var a=["(",e.join("touch-enabled),("),"heartz",")"].join("");return t(a)};window.joe_setup_accordions=function(){var e=jQuery(".joe-accordion-container");e.length&&(e.addClass("joe-self-clear"),e.each(function(){var t=0;jQuery(".joe-accordion-group",jQuery(this)).each(function(){var a=jQuery(this);a.addClass("joe-self-clear"),a.data("joe-index",t);var h=jQuery(".joe-accordion-group-content",a);t==0?(a.addClass("joe-first joe-active"),h.show().addClass(t)):h.hide().addClass(t),jQuery("legend",jQuery(this)).each(function(){var d=jQuery(this).html();if(d.indexOf("[+]")==-1&&d.indexOf("[-]")==-1){var r=t==0?"[-]":"[+]";jQuery(this).html(d+" <span>"+r+"</span>")}jQuery(this).click(function(){var f=jQuery(this).parents(".joe-accordion-group").data("joe-index");jQuery(".joe-accordion-group",jQuery(this).parents(".joe-accordion-container")).each(function(){if(jQuery(this).data("joe-index")==f){var u=jQuery("legend",jQuery(this));jQuery(this).hasClass("joe-active")?(u.html(u.html().replace("[-]","[+]")),jQuery(this).removeClass("joe-active"),jQuery(".joe-accordion-group-content",jQuery(this)).slideUp()):(u.html(u.html().replace("[+]","[-]")),jQuery(this).addClass("joe-active"),jQuery(".joe-accordion-group-content",jQuery(this)).slideDown())}else{jQuery(this).removeClass("joe-active");var u=jQuery("legend",jQuery(this));u.html(u.html().replace("[-]","[+]")),jQuery(".joe-accordion-group-content",jQuery(this)).slideUp()}})})}),t++})}))};window.joe_setup_repeatable_settings=function(){jQuery(".joe-settings-tab .joe-repeatable").each(function(){var e=jQuery(this);jQuery(".form-table",e).each(function(){var t=jQuery(this),a=[];for(t.remove(),jQuery(".joe-input",t).each(function(){var c=jQuery(this);if(c.addClass("joe-"+c.data("id")),c.get(0).nodeName!="SELECT")var n=c.val();else var n=c.data("multi-value");typeof n!="string"&&(n=n.toString()),n=n.split(joe_admin_js.multi_value_seperator);for(i in n)typeof a[i]!="object"&&(a[i]={}),a[i][c.data("id")]=n[i]}),i=0;i<a.length;i++){var h=t.clone();for(j in a[i]){var d=a[i][j],r=jQuery(".joe-input-"+j,h);r.attr("name",r.attr("name")+"["+i+"]"),r.get(0).nodeName=="SELECT"&&!jQuery("option[value='"+a[i][j]+"']",r).length&&(d=jQuery("option",r).first().val()),r.attr("value",d).val(d),r.parents(".joe-control-group").hasClass("joe-uneditable")&&r.attr("readonly","readonly")}var f=jQuery("<div />").text("x").attr("title",joe_admin_js.lang.repeatable_delete_title).addClass("joe-delete").on("click",function(c){c.preventDefault();var n=jQuery(this).parents(".form-table");return n.remove(),!1});h.append(f),e.append(h),e.attr("data-count",i),joe_setup_parameter_tooltips()}var u=jQuery("<button />").html('<i class="ion ion-plus"></i>').addClass("button joe-add").on("click",function(c){c.preventDefault();var n=jQuery(this).parents(".joe-repeatable"),y=parseInt(n.attr("data-count")),v=y+1;n.attr("data-count",v);var _=t.clone();return jQuery(".joe-input",_).each(function(){var s=jQuery(this),g=s.attr("name")+"["+v+"]";s.attr("name",g),s.attr("placeholder",""),s.get(0).nodeName!="SELECT"&&s.val("")}),jQuery(this).before(_),joe_setup_parameter_tooltips(),joe_setup_colour_pickers(),!1});e.append(u),e.sortable()})})};window.joe_setup_dropdowns=function(){jQuery(".joe-parameters-container").each(function(){var e=jQuery(this);jQuery("select",e).each(function(){var t="joe-dropdown-"+jQuery(this).data("id")+"-";t+=jQuery(this).val(),e.addClass(t),jQuery(this).on("change",function(){var a="joe-dropdown-"+jQuery(this).data("id")+"-";jQuery("option",jQuery(this)).each(function(){e.removeClass(a+jQuery(this).attr("value"))}),a+=jQuery(this).val(),e.addClass(a)})})})};window.joe_setup_settings_nav=function(){var e=jQuery("body.wp-admin #joe-settings-nav");if(!e)return!1;var t=jQuery("#joe-admin-container"),a=jQuery("form",t);jQuery(".joe-settings-tab",t);var h=e.data("init_tab_key"),d=jQuery("select",e);d.hover(function(){jQuery(this).attr("size",jQuery("option",jQuery(this)).length)},function(){jQuery(this).removeAttr("size")}),d.change(function(){d.removeAttr("size");var r=jQuery(this).val();t.attr("class","");var f=jQuery('input[name="_wp_http_referer"]',a),u=document.location.toString();u.indexOf("content=")>0?u=u.replace("content="+h,"content="+r):u=u+"&content="+r,f.val(u),jQuery("."+r).first(),jQuery(".joe-settings-tab").each(function(){var c=jQuery(this);c.hide(),r.indexOf("settings-tab")&&c.hasClass(r)&&(c.show(),t.addClass("joe-active-"+r)),jQuery(".joe-settings-section",c).each(function(){var n=jQuery(this);r.indexOf("settings-tab")>0?n.show():r.indexOf("settings-section")>0&&(n.hide(),n.hasClass(r)&&(c.show(),n.show(),t.addClass("joe-active-"+r)))})})}),d.trigger("change")};window.joe_admin_message=function(e=null,t="info",a="#joe-admin-container .card"){if(e){var h=jQuery(a).first();if(!h.length)var h=jQuery("#wpbody-content").first();if(h.length){jQuery(".notice").each(function(){jQuery(this).remove()});var d=jQuery("<div />").attr({class:"joe-notice notice notice-"+t}),r=jQuery("<p />").html(e);d.append(r),h.prepend(d)}else alert(e)}};window.joe_setup_colour_pickers=function(){jQuery(".joe-colour-picker .joe-input").wpColorPicker()};jQuery(document).ready(function(){joe_setup_parameter_tooltips(),joe_setup_accordions(),joe_setup_settings_nav(),joe_setup_repeatable_settings(),joe_setup_dropdowns(),joe_setup_colour_pickers()});

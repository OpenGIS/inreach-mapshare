const inmap_maps=[],inmap_create_map=function(i=null,e=null){if(!i||!e||!jQuery)return!1;var t="inmap-"+i,a=jQuery("#"+t),n=L.map(t);a.data("map_l",n),inmap_maps[i]=n;var r=a.parents(".inmap-wrap"),o=jQuery(".inmap-info",r),s={},p={},d={},c=function(i=null,e="active"){for(this_id in s)this_id===i?("active"==e&&d[this_id].hasClass("inmap-active")?(d[this_id].removeClass("inmap-hide-extended"),n.getZoom()<14?n.setView(s[this_id].getLatLng(),14):n.setView(s[this_id].getLatLng())):(p[this_id].addClass("inmap-"+e),d[this_id].addClass("inmap-"+e)),"active"==e&&(d[this_id].get(0).scrollIntoView({behavior:"smooth",block:"center"}),n.setView(s[this_id].getLatLng()))):(p[this_id].removeClass("inmap-"+e),"active"==e?d[this_id].hasClass("inmap-last")||d[this_id].removeClass("inmap-active"):d[this_id].removeClass("inmap-"+e))},l=(L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(n),L.geoJSON(e,{style:function(i){if("object"==typeof i.properties.style)return i.properties.style},pointToLayer:function(i,e){if(void 0===i.properties.id)return!1;var t=i.properties.id.toString();return"object"==typeof i.properties.icon?s[t]=L.marker(e,{icon:L.divIcon(i.properties.icon)}):s[t]=L.marker(e),d[t]=jQuery("<div />").addClass("inmap-info-item").addClass(i.properties.icon.className).attr("title",i.properties.title).html(i.properties.description).hover((function(){c(t,"hover")}),(function(){c(null,"hover")})).on("click dblclick",(function(){c(t,"active")})),o.append(d[t]),s[t]},onEachFeature:function(i,e){if(void 0===i.properties.id)return!1;var t=i.properties.id.toString();e.on("add",(function(e){p[t]=jQuery(e.target.getElement()).attr("title",i.properties.title).data("marker_l",e.target).on("mouseenter",(function(){c(t,"hover")})).on("click",(function(){c(t,"active")}))}))}}));l.addTo(n),l.on("add",(function(){!function(){for(id in d){var i=jQuery(".inmap-info-title",d[id]),e=i.text().replace("[","<span>").replace("]","</span>");i.html(e),d[id].addClass("inmap-hide-extended"),d[id].append(jQuery("<div />").addClass("inmap-info-icon"))}}()})),n.fitBounds(l.getBounds())};
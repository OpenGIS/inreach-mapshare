const inmap_maps=[],inmap_create_map=function(e=null,t=null){if(!e||!t||!jQuery)return!1;var a="inmap-"+e,n=jQuery("#"+a),r=L.map(a);n.data("map_l",r),inmap_maps[e]=r;var o=n.parents(".inmap-wrap"),s=jQuery(".inmap-info",o),p={},d={},c={},l=function(i=null,e="active"){for(this_id in p)this_id===i?("active"==e&&c[this_id].hasClass("inmap-active")?(c[this_id].removeClass("inmap-hide-extended"),r.getZoom()<14?r.setView(p[this_id].getLatLng(),14):r.setView(p[this_id].getLatLng())):(d[this_id].addClass("inmap-"+e),c[this_id].addClass("inmap-"+e)),"active"==e&&(c[this_id].get(0).scrollIntoView({behavior:"smooth",block:"center"}),r.setView(p[this_id].getLatLng()))):(d[this_id].removeClass("inmap-"+e),"active"==e?c[this_id].hasClass("inmap-last")||c[this_id].removeClass("inmap-active"):c[this_id].removeClass("inmap-"+e))},m=(L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(r),L.geoJSON(t,{style:function(i){if("object"==typeof i.properties.style)return i.properties.style},pointToLayer:function(e,t){if(void 0===e.properties.id)return!1;var a=e.properties.id.toString();"object"==typeof e.properties.icon?p[a]=L.marker(t,{icon:L.divIcon(e.properties.icon)}):p[a]=L.marker(t),c[a]=jQuery("<div />").addClass("inmap-info-item").attr("title",e.properties.title).html(e.properties.description).hover((function(){l(a,"hover")}),(function(){l(null,"hover")})).on("click dblclick",(function(){l(a,"active")}));var n=jQuery("<div />").addClass("inmap-icon"),r=e.properties.icon.className.split(" ");for(i in r){var o=r[i].trim();switch(o){case"inmap-point":break;case"inmap-last":case"inmap-active":case"inmap-first":c[a].addClass(o);break;default:n.addClass(o)}}return c[a].append(n),s.append(c[a]),p[a]},onEachFeature:function(i,e){if(void 0===i.properties.id)return!1;var t=i.properties.id.toString();e.on("add",(function(e){d[t]=jQuery(e.target.getElement()).attr("title",i.properties.title).data("marker_l",e.target).on("mouseenter",(function(){l(t,"hover")})).on("click",(function(){l(t,"active")}))}))}}));m.addTo(r),m.on("add",(function(){!function(){for(id in c){var i=jQuery(".inmap-info-title",c[id]),e=i.text().replace("[","<span>").replace("]","</span>");i.html(e),c[id].addClass("inmap-hide-extended")}}()})),r.fitBounds(m.getBounds())};
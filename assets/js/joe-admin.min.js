function joe_setup_parameter_tooltips(){jQuery("a.joe-tooltip").on({mouseenter:function(e){var t=jQuery(this).data("title");jQuery('<p id="joe-tooltip-active"></p>').text(t).appendTo("body").fadeIn("slow")},mouseleave:function(e){jQuery("#joe-tooltip-active").remove()},mousemove:function(e){if(joe_is_touch_device())var t=e.pageX-250;else t=e.pageX-220;var o=e.pageY+5;jQuery("#joe-tooltip-active").css({top:o,left:t})}})}function joe_is_touch_device(){var e=" -webkit- -moz- -o- -ms- ".split(" ");return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)||function(e){return window.matchMedia(e).matches}(["(",e.join("touch-enabled),("),"heartz",")"].join(""))}function joe_setup_accordions(){var e=jQuery(".joe-accordion-container");e.length&&(e.addClass("joe-self-clear"),e.each((function(){var e=0;jQuery(".joe-accordion-group",jQuery(this)).each((function(){var t=jQuery(this);t.addClass("joe-self-clear"),t.data("joe-index",e);var o=jQuery(".joe-accordion-group-content",t);0==e?(t.addClass("joe-first joe-active"),o.show().addClass(e)):o.hide().addClass(e),jQuery("legend",jQuery(this)).each((function(){var t=jQuery(this).html();if(-1==t.indexOf("[+]")&&-1==t.indexOf("[-]")){var o=0==e?"[-]":"[+]";jQuery(this).html(t+" <span>"+o+"</span>")}jQuery(this).click((function(){var e=jQuery(this).parents(".joe-accordion-group").data("joe-index");jQuery(".joe-accordion-group",jQuery(this).parents(".joe-accordion-container")).each((function(){if(jQuery(this).data("joe-index")==e){var t=jQuery("legend",jQuery(this));jQuery(this).hasClass("joe-active")?(t.html(t.html().replace("[-]","[+]")),jQuery(this).removeClass("joe-active"),jQuery(".joe-accordion-group-content",jQuery(this)).slideUp()):(t.html(t.html().replace("[+]","[-]")),jQuery(this).addClass("joe-active"),jQuery(".joe-accordion-group-content",jQuery(this)).slideDown())}else{jQuery(this).removeClass("joe-active"),(t=jQuery("legend",jQuery(this))).html(t.html().replace("[-]","[+]")),jQuery(".joe-accordion-group-content",jQuery(this)).slideUp()}}))}))})),e++}))})))}function joe_setup_repeatable_settings(){jQuery(".joe-settings-tab .joe-repeatable").each((function(){var e=jQuery(this);jQuery(".form-table",e).each((function(){var t=jQuery(this),o=[];for(t.remove(),jQuery(".joe-input",t).each((function(){var e=jQuery(this);if(e.addClass("joe-"+e.data("id")),"SELECT"!=e.get(0).nodeName)var t=e.val();else t=e.data("multi-value");for(i in"string"!=typeof t&&(t=t.toString()),t=t.split(joe_admin_js.multi_value_seperator))"object"!=typeof o[i]&&(o[i]={}),o[i][e.data("id")]=t[i]})),i=0;i<o.length;i++){var a=t.clone();for(j in o[i]){var r=o[i][j],n=jQuery(".joe-input-"+j,a);n.attr("name",n.attr("name")+"["+i+"]"),"SELECT"!=n.get(0).nodeName||jQuery("option[value='"+o[i][j]+"']",n).length||(r=jQuery("option",n).first().val()),n.attr("value",r).val(r),n.parents(".joe-control-group").hasClass("joe-uneditable")&&n.attr("readonly","readonly")}var s=jQuery("<div />").text("x").attr("title",joe_admin_js.lang.repeatable_delete_title).addClass("joe-delete").on("click",(function(e){return e.preventDefault(),jQuery(this).parents(".form-table").remove(),!1}));a.append(s),e.append(a),e.attr("data-count",i),joe_setup_parameter_tooltips()}var u=jQuery("<button />").html('<i class="ion ion-plus"></i>').addClass("button joe-add").on("click",(function(e){e.preventDefault();var o=jQuery(this).parents(".joe-repeatable"),a=parseInt(o.attr("data-count"))+1;o.attr("data-count",a);var r=t.clone();return jQuery(".joe-input",r).each((function(){var e=jQuery(this),t=e.attr("name")+"["+a+"]";e.attr("name",t),e.attr("placeholder",""),"SELECT"!=e.get(0).nodeName&&e.val("")})),jQuery(this).before(r),joe_setup_parameter_tooltips(),joe_setup_colour_pickers(),!1}));e.append(u),e.sortable()}))}))}function joe_setup_dropdowns(){jQuery(".joe-parameters-container").each((function(){var e=jQuery(this);jQuery("select",e).each((function(){var t="joe-dropdown-"+jQuery(this).data("id")+"-";t+=jQuery(this).val(),e.addClass(t),jQuery(this).on("change",(function(){var t="joe-dropdown-"+jQuery(this).data("id")+"-";jQuery("option",jQuery(this)).each((function(){e.removeClass(t+jQuery(this).attr("value"))})),t+=jQuery(this).val(),e.addClass(t)}))}))}))}function joe_setup_settings_nav(){var e=jQuery("body.wp-admin #joe-settings-nav");if(!e)return!1;var t=jQuery("#joe-admin-container"),o=jQuery("form",t),a=(jQuery(".joe-settings-tab",t),e.data("init_tab_key")),r=jQuery("select",e);r.hover((function(){jQuery(this).attr("size",jQuery("option",jQuery(this)).length)}),(function(){jQuery(this).removeAttr("size")})),r.change((function(){r.removeAttr("size");var e=jQuery(this).val();t.attr("class","");var n=jQuery('input[name="_wp_http_referer"]',o),i=document.location.toString();i=i.indexOf("content=")>0?i.replace("content="+a,"content="+e):i+"&content="+e,n.val(i);jQuery("."+e).first();jQuery(".joe-settings-tab").each((function(){var o=jQuery(this);o.hide(),e.indexOf("settings-tab")&&o.hasClass(e)&&(o.show(),t.addClass("joe-active-"+e)),jQuery(".joe-settings-section",o).each((function(){var a=jQuery(this);e.indexOf("settings-tab")>0?a.show():e.indexOf("settings-section")>0&&(a.hide(),a.hasClass(e)&&(o.show(),a.show(),t.addClass("joe-active-"+e)))}))}))})),r.trigger("change")}function joe_admin_message(e=null,t="info",o="#joe-admin-container .card"){if(e){if(!(a=jQuery(o).first()).length)var a=jQuery("#wpbody-content").first();if(a.length){jQuery(".notice").each((function(){jQuery(this).remove()}));var r=jQuery("<div />").attr({class:"joe-notice notice notice-"+t}),n=jQuery("<p />").html(e);r.append(n),a.prepend(r)}else alert(e)}}function joe_setup_colour_pickers(){jQuery(".joe-colour-picker .joe-input").wpColorPicker()}jQuery(document).ready((function(){joe_setup_parameter_tooltips(),joe_setup_accordions(),joe_setup_settings_nav(),joe_setup_repeatable_settings(),joe_setup_dropdowns(),joe_setup_colour_pickers()}));
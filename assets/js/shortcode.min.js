const inmap_maps=[],inmap_create_map=function(e=null,t=null){if(!e||!t||!jQuery)return!1;var i="inmap-"+e,a=jQuery("#"+i);if(!a.length)return!1;var n=L.map(i);a.data("map_l",n),inmap_maps[e]=n;var r=jQuery("body").first(),s=a.parents(".inmap-wrap",r),o=jQuery(".inmap-info",s),p={},l={},c={},d={},m={},u={},h=function(){o.height();var e=d.height();o.css("padding-top",e+"px")},f=function(){s.hasClass("inmap-fullscreen")?s.css({width:r.width()+"px",height:r.height()+"px"}):s.removeAttr("style"),h(),"function"==typeof m.get&&m.get(0).scrollIntoView({behaviour:"smooth",block:"center"}),n.invalidateSize()},v=function(){u=jQuery(".leaflet-control-container .leaflet-top",a).first();var e=jQuery("<div />").attr({class:"inmap-control leaflet-bar leaflet-control"}).append(jQuery("<a />").attr({class:"inmap-button inmap-icon inmap-icon-fullscreen",href:"#",title:"Fullscreen",role:"button","aria-label":"Fullscreen"}).on("click",(function(){r.toggleClass("inmap-has-single"),s.toggleClass("inmap-fullscreen"),f()})));u.addClass("inmap-map-ui").append(e)},_=function(){for(id in c){var e=jQuery(".inmap-info-title",c[id]),t=e.text().replace("[","<span>").replace("]","</span>");e.html(t),c[id].hasClass("inmap-only")||c[id].addClass("inmap-hide-extended");var i=jQuery(".inmap-icon",l[id]);c[id].append(i.clone()),c[id].hasClass("inmap-last")&&(d=c[id])}},g=function(e=null,t="active",i=!1){for(this_id in p)this_id===e?("active"==t&&c[this_id].hasClass("inmap-active")?(c[this_id].removeClass("inmap-hide-extended"),n.getZoom()<14?n.setView(p[this_id].getLatLng(),14):n.setView(p[this_id].getLatLng())):(l[this_id].addClass("inmap-"+t),c[this_id].addClass("inmap-"+t)),"active"==t&&(i&&c[this_id].get(0).scrollIntoView({behaviour:"smooth",block:"center"}),n.setView(p[this_id].getLatLng()))):"active"==t?(c[this_id].removeClass("inmap-active"),c[this_id].hasClass("inmap-last")||l[this_id].removeClass("inmap-active")):(c[this_id].removeClass("inmap-"+t),l[this_id].removeClass("inmap-"+t));"active"==t&&h()},y="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png";if("string"==typeof inmap_shortcode_js.basemap_url&&inmap_shortcode_js.basemap_url.length)y=inmap_shortcode_js.basemap_url;var b='&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>';if("string"==typeof inmap_shortcode_js.basemap_attribution&&inmap_shortcode_js.basemap_attribution.length)b=inmap_shortcode_js.basemap_attribution;L.tileLayer(y,{maxZoom:19,attribution:b}).addTo(n);var j=L.geoJSON(t,{style:function(e){if("object"==typeof e.properties.style)return e.properties.style},pointToLayer:function(e,t){if(void 0===e.properties.id)return!1;var i=e.properties.id.toString();return"object"==typeof e.properties.icon?p[i]=L.marker(t,{icon:L.divIcon(e.properties.icon)}):p[i]=L.marker(t),c[i]=jQuery("<div />").addClass(e.properties.className).attr("title",e.properties.title).html(e.properties.description).hover((function(){g(i,"hover")}),(function(){g(null,"hover")})).on("click",(function(){m=jQuery(this),g(i,"active")})),o.append(c[i]),p[i]},onEachFeature:function(e,t){if(void 0===e.properties.id)return!1;var i=e.properties.id.toString();t.on("add",(function(t){l[i]=jQuery(t.target.getElement()).attr("title",e.properties.title).addClass(e.properties.className).data("marker_l",t.target).on("mouseenter",(function(){g(i,"hover",!0)})).on("click",(function(){g(i,"active",!0)}))}))}});j.addTo(n),j.on("add",(function(){_(),v(),r.on("resize",(function(){f()})),f()})),n.fitBounds(j.getBounds())};
const inmap_maps=[],inmap_create_map=function(t=null,e=null){if(!t||!e||!jQuery)return!1;var i="inmap-"+t,a=jQuery("#"+i);if(!a.length)return!1;var n=L.map(i);a.data("map_l",n),inmap_maps[t]=n;var r=a.parents(".inmap-wrap"),s=jQuery(".inmap-info",r),o={},p={},l={},d={},c={},m=function(){var t=s.height(),e=d.height(),i=t-e;s.css("height",i+"px"),s.css("padding-top",e+"px")},u=function(t=null,e="active",i=!1){for(this_id in o)this_id===t?("active"==e&&l[this_id].hasClass("inmap-active")?(l[this_id].removeClass("inmap-hide-extended"),n.getZoom()<14?n.setView(o[this_id].getLatLng(),14):n.setView(o[this_id].getLatLng())):(p[this_id].addClass("inmap-"+e),l[this_id].addClass("inmap-"+e)),"active"==e&&(i&&l[this_id].get(0).scrollIntoView({behaviour:"smooth",block:"center"}),n.setView(o[this_id].getLatLng()))):"active"==e?(l[this_id].removeClass("inmap-active"),l[this_id].hasClass("inmap-last")||p[this_id].removeClass("inmap-active")):(l[this_id].removeClass("inmap-"+e),p[this_id].removeClass("inmap-"+e));"active"==e&&m()},h="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png";if("string"==typeof inmap_shortcode_js.basemap_url&&inmap_shortcode_js.basemap_url.length)h=inmap_shortcode_js.basemap_url;var f='&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>';if("string"==typeof inmap_shortcode_js.basemap_attribution&&inmap_shortcode_js.basemap_attribution.length)f=inmap_shortcode_js.basemap_attribution;L.tileLayer(h,{maxZoom:19,attribution:f}).addTo(n);var _=L.geoJSON(e,{style:function(t){if("object"==typeof t.properties.style)return t.properties.style},pointToLayer:function(t,e){if(void 0===t.properties.id)return!1;var i=t.properties.id.toString();return"object"==typeof t.properties.icon?o[i]=L.marker(e,{icon:L.divIcon(t.properties.icon)}):o[i]=L.marker(e),l[i]=jQuery("<div />").addClass(t.properties.className).attr("title",t.properties.title).html(t.properties.description).hover((function(){u(i,"hover")}),(function(){u(null,"hover")})).on("click dblclick",(function(){u(i,"active")})),s.append(l[i]),o[i]},onEachFeature:function(t,e){if(void 0===t.properties.id)return!1;var i=t.properties.id.toString();e.on("add",(function(e){p[i]=jQuery(e.target.getElement()).attr("title",t.properties.title).addClass(t.properties.className).data("marker_l",e.target).on("mouseenter",(function(){u(i,"hover",!0)})).on("click",(function(){u(i,"active",!0)}))}))}});_.addTo(n),_.on("add",(function(){!function(){for(id in l){var t=jQuery(".inmap-info-title",l[id]),e=t.text().replace("[","<span>").replace("]","</span>");t.html(e),l[id].hasClass("inmap-only")||l[id].addClass("inmap-hide-extended");var i=jQuery(".inmap-icon",p[id]);l[id].append(i.clone()),l[id].hasClass("inmap-last")&&((d=l[id]).css({width:s.width()+"px"}),m())}}(),function(){c=jQuery(".leaflet-control-container .leaflet-top",a).first();var t=jQuery("<div />").attr({class:"inmap-control leaflet-bar leaflet-control"}).append(jQuery("<a />").attr({class:"inmap-button inmap-icon inmap-icon-fullscreen",href:"#",title:"Fullscreen",role:"button","aria-label":"Fullscreen"}).on("click",(function(){r.toggleClass("inmap-fullscreen")})));c.addClass("inmap-map-ui").append(t)}()})),n.fitBounds(_.getBounds())};
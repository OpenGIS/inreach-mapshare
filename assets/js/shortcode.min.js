const inmap_maps=[],inmap_create_map=function(e=null,t=null){if(!e||!t||!jQuery)return!1;var i="inmap-"+e,a=jQuery("#"+i);if(!a.length)return!1;var n=L.map(i);a.data("map_l",n),inmap_maps[e]=n;var r=a.parents(".inmap-wrap"),o=jQuery(".inmap-info",r),s={},p={},d={},l=function(e=null,t="active"){for(this_id in s)this_id===e?("active"==t&&d[this_id].hasClass("inmap-active")?(d[this_id].removeClass("inmap-hide-extended"),n.getZoom()<14?n.setView(s[this_id].getLatLng(),14):n.setView(s[this_id].getLatLng())):(p[this_id].addClass("inmap-"+t),d[this_id].addClass("inmap-"+t)),"active"==t&&(console.log(o.scrollTop()),n.setView(s[this_id].getLatLng()))):(p[this_id].removeClass("inmap-"+t),"active"==t?d[this_id].hasClass("inmap-last")||d[this_id].removeClass("inmap-active"):d[this_id].removeClass("inmap-"+t))},c="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png";if("string"==typeof inmap_shortcode_js.basemap_url&&inmap_shortcode_js.basemap_url.length)c=inmap_shortcode_js.basemap_url;var m='&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>';if("string"==typeof inmap_shortcode_js.basemap_attribution&&inmap_shortcode_js.basemap_attribution.length)m=inmap_shortcode_js.basemap_attribution;L.tileLayer(c,{maxZoom:19,attribution:m}).addTo(n);var u=L.geoJSON(t,{style:function(e){if("object"==typeof e.properties.style)return e.properties.style},pointToLayer:function(e,t){if(void 0===e.properties.id)return!1;var i=e.properties.id.toString();return"object"==typeof e.properties.icon?s[i]=L.marker(t,{icon:L.divIcon(e.properties.icon)}):s[i]=L.marker(t),d[i]=jQuery("<div />").addClass(e.properties.className).attr("title",e.properties.title).html(e.properties.description).hover((function(){l(i,"hover")}),(function(){l(null,"hover")})).on("click dblclick",(function(){l(i,"active")})),o.append(d[i]),s[i]},onEachFeature:function(e,t){if(void 0===e.properties.id)return!1;var i=e.properties.id.toString();t.on("add",(function(t){p[i]=jQuery(t.target.getElement()).attr("title",e.properties.title).addClass(e.properties.className).data("marker_l",t.target).on("mouseenter",(function(){l(i,"hover")})).on("click",(function(){l(i,"active")}))}))}});u.addTo(n),u.on("add",(function(){!function(){for(id in d){var e=jQuery(".inmap-info-title",d[id]),t=e.text().replace("[","<span>").replace("]","</span>");e.html(t),d[id].hasClass("inmap-only")||d[id].addClass("inmap-hide-extended");var i=jQuery(".inmap-icon",p[id]);d[id].append(i.clone())}}()})),n.fitBounds(u.getBounds())};
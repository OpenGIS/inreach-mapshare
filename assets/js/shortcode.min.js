const inmap_maps=[],inmap_create_map=function(t=null,i=null){if(!t||!i||!jQuery)return!1;var e="inmap-"+t,a=jQuery("#"+e);if(!a.length)return!1;var n=L.map(e);a.data("map_l",n),inmap_maps[t]=n;var s=a.parents(".inmap-wrap"),r=jQuery(".inmap-info",s),o={},p={},d={},c={},l=function(){var t=r.height(),i=c.height(),e=t-i;r.css("height",e+"px"),r.css("padding-top",i+"px")},m=function(t=null,i="active",e=!1){for(this_id in o)this_id===t?("active"==i&&d[this_id].hasClass("inmap-active")?(d[this_id].removeClass("inmap-hide-extended"),n.getZoom()<14?n.setView(o[this_id].getLatLng(),14):n.setView(o[this_id].getLatLng())):(p[this_id].addClass("inmap-"+i),d[this_id].addClass("inmap-"+i)),"active"==i&&(e&&d[this_id].get(0).scrollIntoView({behaviour:"smooth",block:"center"}),n.setView(o[this_id].getLatLng()))):"active"==i?(d[this_id].removeClass("inmap-active"),d[this_id].hasClass("inmap-last")||p[this_id].removeClass("inmap-active")):(d[this_id].removeClass("inmap-"+i),p[this_id].removeClass("inmap-"+i));"active"==i&&l()},h="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png";if("string"==typeof inmap_shortcode_js.basemap_url&&inmap_shortcode_js.basemap_url.length)h=inmap_shortcode_js.basemap_url;var u='&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>';if("string"==typeof inmap_shortcode_js.basemap_attribution&&inmap_shortcode_js.basemap_attribution.length)u=inmap_shortcode_js.basemap_attribution;L.tileLayer(h,{maxZoom:19,attribution:u}).addTo(n);var _=L.geoJSON(i,{style:function(t){if("object"==typeof t.properties.style)return t.properties.style},pointToLayer:function(t,i){if(void 0===t.properties.id)return!1;var e=t.properties.id.toString();return"object"==typeof t.properties.icon?o[e]=L.marker(i,{icon:L.divIcon(t.properties.icon)}):o[e]=L.marker(i),d[e]=jQuery("<div />").addClass(t.properties.className).attr("title",t.properties.title).html(t.properties.description).hover((function(){m(e,"hover")}),(function(){m(null,"hover")})).on("click dblclick",(function(){m(e,"active")})),r.append(d[e]),o[e]},onEachFeature:function(t,i){if(void 0===t.properties.id)return!1;var e=t.properties.id.toString();i.on("add",(function(i){p[e]=jQuery(i.target.getElement()).attr("title",t.properties.title).addClass(t.properties.className).data("marker_l",i.target).on("mouseenter",(function(){m(e,"hover",!0)})).on("click",(function(){m(e,"active",!0)}))}))}});_.addTo(n),_.on("add",(function(){!function(){for(id in d){var t=jQuery(".inmap-info-title",d[id]),i=t.text().replace("[","<span>").replace("]","</span>");t.html(i),d[id].hasClass("inmap-only")||d[id].addClass("inmap-hide-extended");var e=jQuery(".inmap-icon",p[id]);d[id].append(e.clone()),d[id].hasClass("inmap-last")&&((c=d[id]).css({width:r.width()+"px"}),l())}}()})),n.fitBounds(_.getBounds())};